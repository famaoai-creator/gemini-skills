# 自律型デバッグ・ループ (Autonomous Debug Loop)

スキル実行中に予期せぬエラーが発生した際の、自動復旧と再試行の標準プロトコル。

## 1. エラー検知 (Detection)

- スクリプトが 非0 の終了コードを返した際、即座に停止せず「デバッグ・モード」に移行する。

## 2. 診断フェーズ (Diagnosis)

- **ログ解析**: `token-economist` を使い、`stderr` や失敗ログから原因（構文エラー、権限、パス不備、API制限等）を特定する。
- **コンテキスト確認**: `knowledge-fetcher` で、関連する `knowledge/confidential/` の制約を見落としていないか再確認する。

## 3. 自己修復フェーズ (Self-Healing)

- **パッチ生成**: `skill-evolution-engine` を使い、特定された原因を解消するための修正コード（またはプロンプト）を生成する。
- **適用**: 修正を一時的（または永続的）に反映する。

## 4. 再試行フェーズ (Retry)

- 修正後のスクリプトでタスクを再実行する。
- 最大 3回 までのループを許容し、解決しない場合は `human-in-the-loop-orchestrator` にボールを投げる。

## 5. 永続化 (Learning)

- 成功した修正内容は、将来の再発防止のためスキルの `SKILL.md` または `scripts/` に正式に反映する。
