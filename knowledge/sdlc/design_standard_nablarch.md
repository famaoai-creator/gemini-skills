# アプリケーション方式設計標準 (Nablarch/AWS参考)

このナレッジは、Nablarchフレームワークを用いたAWS上のアプリケーション方式設計における標準的な構成と記述内容をまとめたものです。

## 1. 全体構成

- **全体概要**: システム全体のコンテキスト、アプリケーション構成図（レイヤー構造）、ソフトウェアスタックを明記する。
- **処理方式の分類**:
  - **画面処理方式**: 同期/非同期処理のライフサイクル、エラーハンドリング。
  - **バッチ処理方式**: 都度起動型/常駐型のトリガーとリトライ戦略。
  - **入出力方式**: REST API (FAPI準拠), ファイル転送 (SFTP), メッセージング (SQS/SNS)。

## 2. 共通機能の定義

- **ログ管理**:
  - レベル定義: FATAL, ERROR, WARN, INFO, DEBUG, TRACE。
  - 種類: 障害通知ログ, アクセスログ, SQLログ, パフォーマンスログ, 実行状況ログ。
  - セキュリティ: パスワード等の機密パラメータの自動マスキング。
- **認証・認可**:
  - セッション管理、JWT/Cookieの利用、権限ロールのマッピング。
- **DBアクセス**:
  - 接続プール、トランザクション分離レベル、楽観的/悲観的ロックの使い分け。
- **エラー処理**:
  - 共通エラー画面への遷移、APIレスポンスのステータスコード体系、リトライ回数の上限設定。

## 3. インフラ連携 (AWS固有)

- **ログ出力先**: CloudWatch Logs への標準出力経由での集約。
- **設定値管理**: Parameter Store や Secrets Manager との連携方式。
- **負荷分散**: ALB経由でのコンテナ（Fargate）へのルーティング。
